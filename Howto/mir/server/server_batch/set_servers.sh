#!/bin/bash

declare -a ipaddr=(
"120.79.23.132"
"120.78.211.148"
"120.79.57.134"
"120.78.207.41"
"119.23.17.46"
"119.23.70.9"
"119.23.48.46"
"120.79.135.246"
"120.79.34.80"
"120.79.140.142"
"120.79.62.100"
"120.78.162.73"
"119.23.224.42"
"39.108.158.130"
"120.78.83.173"
"39.108.239.194"
"120.79.80.240"
"120.78.197.16"
"120.79.88.67"
"120.79.78.243"
"112.74.161.177"
"120.79.135.145"
"39.108.94.96"
"120.79.29.208"
"120.79.131.145"
"120.77.32.12"
"120.79.129.224"
"120.79.1.100"
"39.108.168.100"
"120.79.141.140"
"119.23.213.169"
"112.74.40.47"
"120.79.92.206"
"120.78.89.58"
"120.79.70.117"
"120.79.12.149"
"120.79.62.90"
"120.78.214.7"
"120.79.64.211"
"120.79.43.242"
"120.79.1.70"
"119.23.50.171"
"120.79.38.200"
"120.79.69.145"
"120.78.169.71"
"120.78.190.251"
"120.79.38.46"
"39.108.53.40"
"120.79.22.99"
"120.79.193.132"
	)

for i in "${ipaddr[@]}"
do
	echo "Connecting to $i"
	ssh -oStrictHostKeyChecking=no -i /Users/jeff/MiRWorkspace/Dev/MiRCN-Sim.pem -t root@$i 'sudo docker stop $(sudo docker ps -a -q); sudo docker run -p 80:80 -p 502:502 -p 8080:8080 -p 9090:9090 --rm -i -t -d mirrobots/simulator:latest; exit;'
	# ssh -i /Users/jeff/Documents/Backup/AWS-EC2.pem -t ubuntu@$i 'sudo docker stop $(sudo docker ps -a -q); sudo docker run -p 80:80 -p 502:502 -p 8080:8080 -p 9090:9090 --rm -i -t -d mirrobots/simulator:latest; exit;'
done